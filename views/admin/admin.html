{% extends 'base.html' %}

{% block content %}
<h1>Bienvenue sur la page admin</h1>
<a href="{{ base_path ~ 'admin/articles/create' }}"><i class="fa fa-arrow-left" aria-hidden="true"></i> Cr√©er un article</a>
<h2>Liste des articles</h2> 
<table>
  {% for post in posts %}
    <tr>
        <td>({{ post.id }})</td>
        <td>{{ post.title }}</td>
        <td><a class="btn btn-primary" href="{{ base_path ~ 'admin/articles/' ~ post.id ~ '/edit'}}">Editer</a></td>
        <td>
            <form action="{{ base_path ~ 'admin/articles/' ~ post.id~'/delete/'}}" method="post">
                <input type="hidden" value="{{ post.id }}" name="id">
                <button class="btn btn-success">supprimer</button>
            </form>
        </td>
    </tr>
    
    {% endfor %}
</table>
<h2>Liste des commentaires en attente de validation</h2> 
<table>
    {% for comment in comments %}
    <tr>
        <td>{{ comment.post }}</td>
        <td>{{ comment.author }}</td>
        <td>{{ comment.comment }}</td>
        <td>
            <form action="{{ base_path ~ 'admin/comments/' ~ comment.id ~ '/valided'}}" method="post">
                <input type="hidden" value="{{ comment.id }}" name="id">
                <button class="btn btn-success">Valider</button>
            </form>
        </td>
        <td>
            <form action="{{ base_path ~ 'admin/comments/' ~ comment.id~'/delete/'}}" method="post">
                <input type="hidden" value="{{ comment.id }}" name="id">
                <button class="btn btn-success">supprimer</button>
            </form>
        </td>
    </tr>
    
    {% endfor %}
</table>
<h2>Liste des utilisateurs</h2> 
<table>
  {% for user in allusers %}
    <tr>
        <td>({{ user.id }})</td>
        <td>{{ user.username }}</td>
        <td><a class="btn btn-primary" href="{{ base_path ~ 'admin/users/' ~ user.id ~ '/edit'}}">Editer</a></td>
        <td>
            <form action="{{ base_path ~ 'admin/users/' ~ user.id~'/delete/'}}" method="post">
                <input type="hidden" value="{{ user.id }}" name="id">
                <button class="btn btn-success">supprimer</button>
            </form>
        </td>
    </tr>
    
    {% endfor %}
</table>   
<h2>Liste des utilisateurs en attente de validation</h2> 
<table>
    {% for user in users %}
    <tr>
        <td>{{ user.username }}</td>
        <td>
            <form action="{{ base_path ~ 'admin/users/' ~ user.id ~ '/valided'}}" method="post">
                <input type="hidden" value="{{ user.id }}" name="id">
                <button class="btn btn-success">Valider</button>
            </form>
        </td>
        <td>
            <form action="{{ base_path ~ 'admin/users/' ~ user.id~'/delete/'}}" method="post">
                <input type="hidden" value="{{ user.id }}" name="id">
                <button class="btn btn-success">supprimer</button>
            </form>
        </td>
    </tr>
    
    {% endfor %}
</table>

{% endblock %}


